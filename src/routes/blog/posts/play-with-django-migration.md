---
title: Play with Django migration
data: "2019-11-28T00:00:00.000Z"
---

# Get Started
In this post, I will show you a litter magic of Django migration by resolving a weird issue.

# Steps to reproduce

1. Create a Django project

```bash
django-admin startproject mysite
```

2. Create a Django app
```bash
cd mysite
python manage.py startapp polls
```

3. Declare a table model
```python
from django.db import models
from django.db.models import Model
# Create your models here.


class TestTable(Model):
    class Meta:
        db_table = 'test_table'

    id = models.AutoField(primary_key=True)
    col1 = models.TextField(null=True)
    col2 = models.TextField(null=True)
```

4. Create migration and do migrate
```bash
python manage.py makemigrations
```

as result:
```
# Generated by Django 2.1.5 on 2019-11-28 15:42

from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='TestTable',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('col1', models.TextField(null=True)),
                ('col2', models.TextField(null=True)),
            ],
            options={
                'db_table': 'test_table',
            },
        ),
    ]
```
5. Modify the model, rename the column
6. create migration and do rename by SQL instead.
7. Modify the model, and new column
8. Create migration and try to migrate